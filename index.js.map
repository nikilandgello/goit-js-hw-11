{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { IZI_MESSEGES, showMessage } from '../main.js';\n\nconst KEY_API = '47345355-bb5adb35ee772e90f4db69f75';\n\nexport function getImages(qValue) {\n\n    const params = new URLSearchParams({\n        key: KEY_API,\n        q: qValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    \n    return fetch(`https://pixabay.com/api/?${params}`)\n        .then((response) => {\n            if (!response.ok) {\n                showMessage(IZI_MESSEGES.error.type, IZI_MESSEGES.error.message);\n                throw new Error('Failed to fetch data');\n            };\n\n            return response.json();\n        })\n        .catch((error) => {\n            console.error('Error:', error.message);\n            return;\n        });\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createMarkup(arr) {\n    return arr.map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads }) => {\n        return `<li class = 'list-item'>\n            <a class='gallery-link' href='${largeImageURL}'>\n                <img\n                    class = 'gallery-image'\n                    src = '${webformatURL}'\n                    alt =  '${tags}'>\n            </a>\n            <ul class = 'description-list'>\n                <li class = 'description-item'>\n                    <h3>Likes</h3>\n                    <p>${likes}</p>\n                </li>\n                <li class = 'description-item'>\n                    <h3>Views</h3>\n                    <p>${views}</p>\n                </li>\n                <li class = 'description-item'>\n                    <h3>Comments</h3>\n                    <p>${comments}</p>\n                </li>\n                <li class = 'description-item'>\n                    <h3>Downloads</h3>\n                    <p>${downloads}</p>\n                </li>\n            </ul>\n        </li>`\n        }).join('')\n};\n\nexport function renderGallery(data, tagToInsert) {\n    tagToInsert.innerHTML = createMarkup(data);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    lightbox.refresh();\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst inputSearch = document.querySelector('[name=\"search\"]');\nconst gallery = document.querySelector('.gallery');\nconst spanLoader = document.createElement('span');\n\n\nform.addEventListener('input', savetoLocalStorage);\nform.addEventListener('submit', searchImages);\n\n//localStorage\nconst localKey = 'input-name-image';\nconst localData = JSON.parse(localStorage.getItem(localKey));\n\nconst formData = {\n    search: '',\n};\n\nif (localData) {\n    inputSearch.value = localData.search;\n    formData.search = localData.search;\n};\n\nfunction savetoLocalStorage(e) {\n    formData.search = e.target.value.trim();\n\n    localStorage.setItem(localKey, JSON.stringify(formData));\n};\n\n//get images\nfunction searchImages(e) {\n    e.preventDefault();\n    loader();\n\n    const input = e.target.elements.search;\n\n    if (!input.value.trim()) {\n        showMessage(IZI_MESSEGES.info.type, IZI_MESSEGES.info.message);\n        gallery.innerHTML = '';\n        return;\n    } \n    \n    getImages(input.value.trim())\n        .then((data) => {\n            if (!data.hits.length) {\n                showMessage(IZI_MESSEGES.warning.type, IZI_MESSEGES.warning.message);\n                gallery.innerHTML = '';\n                return;\n            }\n\n            showMessage(IZI_MESSEGES.success.type, IZI_MESSEGES.success.message);\n            \n            renderGallery(data.hits, gallery)\n            return;\n        })\n        .finally(() => {\n            localStorage.removeItem(localKey);\n            formData.search = '';\n\n            form.reset();\n            return;\n        });\n    \n    return;\n};\n\n//loader\nfunction loader() {\n    spanLoader.classList.add('loader');\n    gallery.append(spanLoader);\n}\n\n// iziToast message\nconst IZI_MESSEGES = {\n    success: {\n        type: 'success',\n        message: 'Request completed successfully'\n    },\n    info: {\n        type: 'info',\n        message: 'The field must be filled',\n    },\n    warning: {\n        type: 'warning',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    },\n    error: {\n        type: 'error',\n        message: 'Something went wrong. Please try again later!',\n    },\n};\n\nfunction showMessage(type, message) {\n    const bgColor = {\n        success: 'rgb(0, 255, 128, 0.7)',\n        info: 'rgb(76, 153, 255, 0.7)',\n        warning: 'rgb(255, 193, 7, 0.7)',\n        error: 'rgb(255, 76, 76, 0.7)',\n    };\n\n    iziToast.show({\n        message,\n        messageColor: 'white',\n        position: \"topRight\",\n        backgroundColor: bgColor[type],\n    });\n};\n\nexport { IZI_MESSEGES, showMessage };"],"names":["KEY_API","getImages","qValue","params","response","showMessage","IZI_MESSEGES","error","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","data","tagToInsert","SimpleLightbox","form","inputSearch","gallery","spanLoader","savetoLocalStorage","searchImages","localKey","localData","formData","e","loader","input","type","message","bgColor","iziToast"],"mappings":"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"}